<!DOCTYPE html>
<html lang="fa-IR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>صفحه پست و کامنت‌ها | دوره آموزشی فرانت‌اند وب</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/cafebazaar-frontend-dev-course/assets/css/0.styles.aa824caa.css" as="style"><link rel="preload" href="/cafebazaar-frontend-dev-course/assets/js/app.7ef8433e.js" as="script"><link rel="preload" href="/cafebazaar-frontend-dev-course/assets/js/2.39eefcc5.js" as="script"><link rel="preload" href="/cafebazaar-frontend-dev-course/assets/js/11.bc584972.js" as="script"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/10.31921687.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/12.119895a4.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/13.0140d6ab.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/14.091abddf.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/15.f0be8258.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/16.1f879f43.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/17.763a84f8.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/18.463032c0.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/19.91b63b99.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/20.1a617463.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/3.42655db2.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/4.23e6422f.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/5.1fd5b190.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/6.95c9bee9.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/7.36dd0cdd.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/8.d4639324.js"><link rel="prefetch" href="/cafebazaar-frontend-dev-course/assets/js/9.c400b930.js">
    <link rel="stylesheet" href="/cafebazaar-frontend-dev-course/assets/css/0.styles.aa824caa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cafebazaar-frontend-dev-course/" class="home-link router-link-active"><img src="/cafebazaar-frontend-dev-course/logo.png" alt="دوره آموزشی فرانت‌اند وب" class="logo"> <span class="site-name can-hide">دوره آموزشی فرانت‌اند وب</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://jobs.cafebazaar.ir" target="_blank" rel="noopener noreferrer" class="nav-link external">
  فرصت‌های شغلی
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://cafebazaar.ir/about" target="_blank" rel="noopener noreferrer" class="nav-link external">
  درباره کافه‌بازار
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/madmadi/cafebazaar-frontend-dev-course" target="_blank" rel="noopener noreferrer" class="repo-link">
    گیت‌هاب
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://jobs.cafebazaar.ir" target="_blank" rel="noopener noreferrer" class="nav-link external">
  فرصت‌های شغلی
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://cafebazaar.ir/about" target="_blank" rel="noopener noreferrer" class="nav-link external">
  درباره کافه‌بازار
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/madmadi/cafebazaar-frontend-dev-course" target="_blank" rel="noopener noreferrer" class="repo-link">
    گیت‌هاب
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/cafebazaar-frontend-dev-course/course/html-intro.html" class="sidebar-link">آشنایی با HTML</a></li><li><a href="/cafebazaar-frontend-dev-course/course/css-intro.html" class="sidebar-link">آشنایی با CSS</a></li><li><a href="/cafebazaar-frontend-dev-course/course/layout.html" class="sidebar-link">صفحه‌آرایی (Layout)</a></li><li><a href="/cafebazaar-frontend-dev-course/course/javascript-concepts.html" class="sidebar-link">مفاهیم JavaScript</a></li><li><a href="/cafebazaar-frontend-dev-course/course/http-intro.html" class="sidebar-link">آشنایی با HTTP</a></li><li><a href="/cafebazaar-frontend-dev-course/course/dom-ajax-json-intro.html" class="sidebar-link">آشنایی با DOM و AJAX و JSON</a></li><li><a href="/cafebazaar-frontend-dev-course/course/version-control.html" class="sidebar-link">کنترل نسخه</a></li><li><a href="/cafebazaar-frontend-dev-course/course/es6-and-tools.html" class="sidebar-link">خلاصه پروژه و نصب node</a></li><li><a href="/cafebazaar-frontend-dev-course/course/basic-react-and-layout.html" class="sidebar-link">نمایش لیست پست‌ها و layout</a></li><li><a href="/cafebazaar-frontend-dev-course/course/advanced-react.html" class="active sidebar-link">صفحه پست و کامنت‌ها</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cafebazaar-frontend-dev-course/course/advanced-react.html#coding-style" class="sidebar-link">Coding style</a></li><li class="sidebar-sub-header"><a href="/cafebazaar-frontend-dev-course/course/advanced-react.html#ری‌اکت-router" class="sidebar-link">ری‌اکت Router</a></li><li class="sidebar-sub-header"><a href="/cafebazaar-frontend-dev-course/course/advanced-react.html#صفحه-پست" class="sidebar-link">صفحه پست</a></li><li class="sidebar-sub-header"><a href="/cafebazaar-frontend-dev-course/course/advanced-react.html#کامنت‌ها" class="sidebar-link">کامنت‌ها</a></li></ul></li><li><a href="/cafebazaar-frontend-dev-course/course/authentication-and-authorization.html" class="sidebar-link">بررسی هویت کاربر و ارسال پست</a></li><li><a href="/cafebazaar-frontend-dev-course/course/state-management.html" class="sidebar-link">مدیریت state</a></li><li><a href="/cafebazaar-frontend-dev-course/course/methodology.html" class="sidebar-link">متدولوژی</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="صفحه-پست-و-کامنت‌ها"><a href="#صفحه-پست-و-کامنت‌ها" class="header-anchor">#</a> صفحه پست و کامنت‌ها</h1> <p>با شکل‌گیری مفهوم Single Page Application ها، نیاز به امکانی برای جابجا کردن کاربر بین صفحات مختلف احساس شد. به این شکل که با کلیک کردن کاربر روی یک لینک، نیاز بود که url صفحه عوض شه و برای این که کاربر حس نکنه که صفحه داره کامل عوض میشه، یک سری المان‌های صفحه مثل header باقی می‌مونند. همچنین به توسعه‌دهنده ها این امکان رو می‌داد که با رد و بدل کردن اطلاعات کمی، یک صفحه جداگونه رو نسبت به صفحه قبل، به کاربر نشون بدن.Routing به فرایندی گفته‌میشه که طی اون، کاربر لینکی رو از application می‌خواد و application تصمیم می‌گیره که کدوم صفحه باید به کاربر نشون داده بشه.</p> <h2 id="coding-style"><a href="#coding-style" class="header-anchor">#</a> Coding style</h2> <p>برای مرتب‌سازی کد از ابزارهایی استفاده می‌شه. این ابزارها بر اساس قوانینی کد رو مرتب می‌کنند و در صورت رعایت نکردنشون خطا یا هشدار نشون می‌دن. رعایت این قوانین باعث خوانایی بهتر کد و consistency پروژه می‌شه.</p> <p><a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو نصب کن و از تنظیمات recommended و <a href="https://www.npmjs.com/package/eslint-config-airbnb" target="_blank" rel="noopener noreferrer">airbnb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> استفاده کن.</p> <p>همچنین برای همه کامپوننت‌های ری‌اکت که مینویسی حتما <a href="https://reactjs.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener noreferrer">propType<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> هم بنویس تا معلوم باشه هر کامپوننت نیاز به چه فیلدهایی داره.</p> <h2 id="ری‌اکت-router"><a href="#ری‌اکت-router" class="header-anchor">#</a> ری‌اکت Router</h2> <p>با توجه به اینکه نشون دادن کانتن با توجه به url و تصمیم‌گیری اون در سمت کلاینت میتونه به مرور و برای لینک‌های داینامیک پیچیده بشه، از پکیج آماده‌ی react-router استفاده میکنیم که انواع مرورگرها رو میتونه ساپورت کنه.لینک‌های زیر رو از مستندات react-router بخون:</p> <ul><li><a href="https://reacttraining.com/react-router/web/guides/philosophy" target="_blank" rel="noopener noreferrer">Philosophy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reacttraining.com/react-router/web/guides/basic-components" target="_blank" rel="noopener noreferrer">Basic Components<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener noreferrer">Quick Start<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>و همه مثال‌هایی که تو همون سایت آورده شده رو یه نگاه بنداز تا کامل یاد بگیری چجوری کار میکنه.</p> <p>در ادامه میخوایم این پکیج رو به پروژه اضافه کنیم. خود create-react-app توضیحات خوبی برای اضافه کردن router بهمون میده: <a href="https://facebook.github.io/create-react-app/docs/adding-a-router" target="_blank" rel="noopener noreferrer">لینک<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="صفحه-پست"><a href="#صفحه-پست" class="header-anchor">#</a> صفحه پست</h2> <p>تا الان روی صفحه خانه کار می‌کردیم که لیست پست‌ها رو نشون میده (با آدرس /). حالا میریم سراغ صفحه /post/:id که یه پست رو نشون میده.</p> <p>با این اوصاف، علاوه بر کامپوننت App که از قبل وجود داشت، به سه کامپوننت دیگه نیاز داریم:</p> <p>Home: برای نشون دادن لیست پست‌ها</p> <p>PostPage: برای نشون دادن صفحه پست (کامپوننتی که به react-router میدیم)</p> <p>Post: که کامپوننت اصلی یک پست هست و رندرش می‌کنه و دو کامپوننت دیگه ازش استفاده می‌کنن.</p> <p>از کامپوننت App فقط برای نمایش Header و Routing استفاده می‌کنیم.</p> <p>فایل PostService تا الان فقط یک endpoint داشت و اون هم برای گرفتن لیست پست‌ها بود. Endpoint جدیدی باید بهش اضافه بشه که فقط اطلاعات مربوط به یک پست رو میگیره. آدرسش اینه:</p> <p><code>localhost:8080/posts/[id]</code></p> <p>حالا title پست‌هایی که داشتیم رو به <a href="https://reacttraining.com/react-router/web/api/Link" target="_blank" rel="noopener noreferrer">لینکِ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> روتر تبدیل کن. با کلیک کردن روشون صفحه مربوط به همون پست باید نشون داده بشه. برای نمایش یک پست تکی نمیخوایم کامپوننت Post زیاد پیچیده بشه و منطق فراخوانی api مستقیما داخلش نوشته بشه، برای ارائه یه راه حل بهتر این <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" target="_blank" rel="noopener noreferrer">لینک<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو حتما بخون.</p> <h2 id="کامنت‌ها"><a href="#کامنت‌ها" class="header-anchor">#</a> کامنت‌ها</h2> <p>تو صفحه پست، علاوه بر خود متن، می‌خوایم کامنت‌های مربوط به اون پست رو هم نشون بدیم. Endpoint مربوط به کامنت‌های یک پست، اینه:</p> <p><code>localhost:8080/posts/[id]/comments/</code></p> <p>در این قسمت قرار نیست که ارسال کامنت رو اضافه کنیم، و فقط نمایششون کفایت می‌کنه.</p> <p>اول یه کامپوننت به اسم CommentSection پیاده سازی کن که با گرفتن یه آرایه از کامنت‌ها، اونا رو با styling مناسب توی صفحه نشون بده. از این کامپوننت داخل PostPage استفاده کن و تابع گرفتن لیست کامنت‌ها رو (که قبلا توی PostService پیاده‌سازی کردی)، تو این کامپوننت صدا بزن.</p> <p>در ادامه با توجه به این <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" target="_blank" rel="noopener noreferrer">لینک<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> که گفتیم بخونی کامپوننت CommentSection رو به دو کامپوننت مجزا تقسیم کن که یکی صرفا وظیفه نمایش کامنت رو داره و اون یکی فراخوانی به api رو انجام میده. همچنین بررسی کن آیا میشه به کامپوننت‌های کوچیکتری هم تقسیم بشه تا پیچیدگی کمتر بشه یا نه؟</p> <p>برای این دو قسمتِ پست و کامنت‌ها loading مناسب تعریف کن. یعنی تا وقتی محتوای هر کدوم لود نشده، داخل اون قسمت بنویس: «در حال بارگذاری...».</p> <h3 id="ساختار-درختی-کامنت‌ها"><a href="#ساختار-درختی-کامنت‌ها" class="header-anchor">#</a> ساختار درختی کامنت‌ها</h3> <p>بعضی از کامنت‌هایی که از سرور میگیری، فیلد parent_idشون، null هست. اون ها کامنت‌هایی هستند که مربوط به خود پست هستند. سایر کامنت‌ها که مقدار این فیلد براشون یک عدد ست شده، در پاسخ (reply) به کامنتی با آیدی parent_id ارسال شدن. در نتیجه باید زیر parentش نشون داده‌بشه. همچنین تمام کامنت‌ها باید دکمه‌ای داشته‌باشند برای پاسخ دادن به اون کامنت؛ که با کلیک روی اون، میشه جوابی به خود اون کامنت فرستاد. که البته باز هم نیازی به ارسال پاسخ به سرور وجود نداره و فقط وجود این فیلد ورودی کفایت می‌کنه.</p> <h3 id="ارسال-comment"><a href="#ارسال-comment" class="header-anchor">#</a> ارسال comment</h3> <p>حالا می‌خوایم امکان ارسال comment رو اضافه کنیم. برای ارسال comment جدید به endpoint کامنت‌های یک پست با متد POST ریکوئست می‌زنیم و فیلدهای مرتبط رو برای سرور می‌فرستیم. نکته مهم در این قسمت، اینه که فیلد parent_id هم باید متناسب با جایی که کامنت داره ارسال میشه، به سرور بره.</p> <p>ارسال کامنت برای یک پست بدونِ ثبت‌نام و لاگین باید برای همه قابل انجام باشه. به همین دلیل به فیلدهایی برای دریافتِ «نام» و «متنِ کامنت» نیاز داریم.</p> <p>سایر فیچر‌های این قسمت، به شکل زیر هست:</p> <ul><li><p>در صورتی که ارتفاع متن نوشته‌شده توسط کاربر، از ارتفاع تعبیه شده برای این فیلدِ متنِ کامنت بیشتر باشه، نباید به اون فیلد اسکرول اضافه بشه، بلکه باید طول فیلد هم افزایش پیدا کنه.</p></li> <li><p>در صورتی که کاربر ctrl + enter رو می‌زنه، کامنت ارسال میشه به سرور (دکمه Send Comment هم داشته باشه که همین کار رو می‌کنه)</p></li> <li><p>اطلاعاتی که به سرور می‌فرستی، شامل موارد زیر هست:</p> <ul><li>هدر تعیین کننده نوع اطلاعات فرستاده شده به سرور (json)</li> <li>اطلاعات کامنت (به صورت json) شامل:
<ul><li>author (string)</li> <li>body (string)</li> <li>date (string)</li> <li>parent_id (null | number)</li></ul></li></ul></li> <li><p>این کامنت رو بدون گرفتن لیست دوباره کامنت‌ها به صفحه اضافه کن.</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/madmadi/cafebazaar-frontend-dev-course/edit/master/course/advanced-react.md" target="_blank" rel="noopener noreferrer">ویرایش این صفحه در گیت‌هاب</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">آخرین بروزرسانی:</span> <span class="time">2019-12-7 08:11:45</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cafebazaar-frontend-dev-course/course/basic-react-and-layout.html" class="prev">نمایش لیست پست‌ها و layout</a></span> <span class="next"><a href="/cafebazaar-frontend-dev-course/course/authentication-and-authorization.html">بررسی هویت کاربر و ارسال پست</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/cafebazaar-frontend-dev-course/assets/js/app.7ef8433e.js" defer></script><script src="/cafebazaar-frontend-dev-course/assets/js/2.39eefcc5.js" defer></script><script src="/cafebazaar-frontend-dev-course/assets/js/11.bc584972.js" defer></script>
  </body>
</html>
